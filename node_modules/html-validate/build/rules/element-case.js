"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const rule_1 = require("../rule");
const defaults = {
    style: 'lowercase',
};
class ElementCase extends rule_1.Rule {
    constructor(options) {
        super(Object.assign({}, defaults, options));
        [this.pattern, this.lettercase] = parseStyle(this.options.style);
    }
    setup() {
        this.on('tag:open', (event) => {
            const letters = event.target.tagName.replace(/[^a-z]+/ig, '');
            if (!letters.match(this.pattern)) {
                this.report(event.target, `Element "${event.target.tagName}" should be ${this.lettercase}`);
            }
        });
    }
}
function parseStyle(style) {
    switch (style.toLowerCase()) {
        case 'lowercase': return [/^[a-z]*$/, 'lowercase'];
        case 'uppercase': return [/^[A-Z]*$/, 'uppercase'];
        default:
            throw new Error(`Invalid style "${style}" for "element-case" rule`);
    }
}
module.exports = ElementCase;
